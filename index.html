<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Flashcards de Ingl√™s</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --primary: #2563eb;
    --secondary: #64748b;
    --bg: #f8fafc;
    --card: #ffffff;
    --warning: #f59e0b;
}

body {
    margin: 0;
    font-family: "Segoe UI", system-ui, sans-serif;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.container {
    width: 100%;
    max-width: 380px;
    padding: 16px;
}

h1 {
    text-align: center;
    font-size: 20px;
    margin-bottom: 8px;
}

select {
    width: 100%;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #cbd5f5;
    margin-bottom: 10px;
}

.progress {
    font-size: 13px;
    text-align: center;
    color: var(--secondary);
    margin-bottom: 8px;
}

.card {
    width: 100%;
    height: 280px;
    perspective: 1200px;
    cursor: pointer;
}

.card-inner {
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.card.flip .card-inner {
    transform: rotateY(180deg);
}

.card-face {
    position: absolute;
    inset: 0;
    background: var(--card);
    border-radius: 16px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.12);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    backface-visibility: hidden;
}

.front {
    font-size: 34px;
    font-weight: 700;
    color: var(--primary);
}

.back {
    transform: rotateY(180deg);
    flex-direction: column;
    font-size: 15px;
    line-height: 1.5;
}

.controls {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-top: 12px;
}

button {
    padding: 10px;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    cursor: pointer;
    background: var(--primary);
    color: #fff;
}

button.star {
    background: var(--warning);
}

button.star.active {
    box-shadow: 0 0 0 2px rgba(245, 158, 11, 0.35);
    filter: brightness(0.98);
}
</style>
</head>
<body>

<div class="container">
  <h1>Flashcards de Ingl√™s</h1>

  <select id="levelSelect" onchange="changeLevel()">
    <option value="A1">A1</option>
    <option value="A2">A2</option>
    <option value="B1">B1</option>
    <option value="B2">B2</option>
  </select>

  <div class="progress" id="levelCount"></div>
  <div class="progress" id="progress"></div>

  <div class="card" id="card" onclick="flipCard()">
    <div class="card-inner">
      <div class="card-face front" id="wordFront"></div>
      <div class="card-face back">
        <p><strong>Tradu√ß√£o:</strong> <span id="translation"></span></p>
        <p><strong>Pron√∫ncia:</strong> <span id="pronunciation"></span></p>
        <p><strong>Exemplo:</strong> <span id="example"></span></p>
      </div>
    </div>
  </div>

  <div class="controls">
    <button onclick="prevWord()">‚óÄ</button>
    <button onclick="speak()">üîä</button>
    <button class="star" onclick="toggleDifficult()">‚≠ê</button>
    <button onclick="nextWord()">‚ñ∂</button>
  </div>
</div>

<script type="module">
const levelSelect = document.getElementById("levelSelect");
const wordFront = document.getElementById("wordFront");
const translation = document.getElementById("translation");
const pronunciation = document.getElementById("pronunciation");
const example = document.getElementById("example");
const progress = document.getElementById("progress");
const levelCount = document.getElementById("levelCount");
const card = document.getElementById("card");
const starButton = document.querySelector("button.star");

const wordsByLevel = {
  A1: [
    { word: "hello", translation: "ol√°", pronunciation: "hel√¥u", example: "Hello, how are you?" },
    { word: "please", translation: "por favor", pronunciation: "pl√≠iz", example: "Please close the door." },
    { word: "thank you", translation: "obrigado", pronunciation: "th√©nk i√∫", example: "Thank you for your help." },
    { word: "sorry", translation: "desculpe", pronunciation: "s√≥ri", example: "Sorry, I am late." },
    { word: "water", translation: "√°gua", pronunciation: "u√≥ter", example: "I need some water." },
    { word: "food", translation: "comida", pronunciation: "f√∫ud", example: "The food is delicious." },
    { word: "friend", translation: "amigo", pronunciation: "fr√©nd", example: "She is my best friend." },
    { word: "family", translation: "fam√≠lia", pronunciation: "f√©mili", example: "My family is big." }
  ],
  A2: [
    { word: "always", translation: "sempre", pronunciation: "√≥l-ueiz", example: "I always wake up early." },
    { word: "usually", translation: "geralmente", pronunciation: "i√∫juli", example: "He usually walks to work." },
    { word: "sometimes", translation: "√†s vezes", pronunciation: "s√¢mtaimz", example: "We sometimes eat out." },
    { word: "because", translation: "porque", pronunciation: "bik√≥z", example: "She is late because of traffic." },
    { word: "travel", translation: "viajar", pronunciation: "tr√°vel", example: "They love to travel together." },
    { word: "important", translation: "importante", pronunciation: "imp√≥rtant", example: "Breakfast is important." },
    { word: "practice", translation: "praticar", pronunciation: "pr√©k-tis", example: "Practice makes perfect." },
    { word: "weather", translation: "tempo/clima", pronunciation: "u√©ther", example: "The weather is warm today." }
  ],
  B1: [
    { word: "achieve", translation: "alcan√ßar", pronunciation: "ach√≠iv", example: "She achieved her goals." },
    { word: "challenge", translation: "desafio", pronunciation: "tch√©len dge", example: "This is a difficult challenge." },
    { word: "experience", translation: "experi√™ncia", pronunciation: "iksp√≠riens", example: "He shared his experience." },
    { word: "ability", translation: "habilidade", pronunciation: "ab√≠liti", example: "She has the ability to lead." },
    { word: "advice", translation: "conselho", pronunciation: "adv√°is", example: "He gave me good advice." },
    { word: "career", translation: "carreira", pronunciation: "karr√≠er", example: "She wants a career in law." },
    { word: "community", translation: "comunidade", pronunciation: "komi√∫-niti", example: "Our community is friendly." },
    { word: "environment", translation: "meio ambiente", pronunciation: "inv√°ironment", example: "We must protect the environment." },
    { word: "improve", translation: "melhorar", pronunciation: "impr√∫v", example: "Practice helps you improve." },
    { word: "issue", translation: "quest√£o/problema", pronunciation: "√≠shiu", example: "This is a serious issue." },
    { word: "purpose", translation: "prop√≥sito", pronunciation: "p√¢rp√¥s", example: "What is the purpose of this?" },
    { word: "progress", translation: "progresso", pronunciation: "pr√≥gress", example: "You made great progress." },
    { word: "require", translation: "exigir", pronunciation: "ruicw√°ier", example: "This job requires patience." },
    { word: "support", translation: "apoio", pronunciation: "sup√≥rt", example: "Thank you for your support." },
    { word: "volunteer", translation: "volunt√°rio", pronunciation: "v√≥lan-tier", example: "She volunteers on weekends." }
  ],
  B2: [
    { word: "approach", translation: "abordagem", pronunciation: "apr√¥utch", example: "We need a new approach." },
    { word: "assume", translation: "assumir", pronunciation: "ass√∫m", example: "Don't assume the result." },
    { word: "awareness", translation: "consci√™ncia", pronunciation: "au√©rness", example: "They raised awareness about recycling." },
    { word: "circumstance", translation: "circunst√¢ncia", pronunciation: "s√¢rcum-stans", example: "Under these circumstances we must wait." },
    { word: "commitment", translation: "compromisso", pronunciation: "com√≠tment", example: "Her commitment is impressive." },
    { word: "consequence", translation: "consequ√™ncia", pronunciation: "k√≥nse-kuens", example: "Every action has a consequence." },
    { word: "despite", translation: "apesar de", pronunciation: "disp√°it", example: "Despite the rain, we went out." },
    { word: "estimate", translation: "estimativa", pronunciation: "√©stim√™t", example: "Can you estimate the cost?" },
    { word: "feature", translation: "caracter√≠stica", pronunciation: "f√≠tchar", example: "This phone has a new feature." },
    { word: "maintain", translation: "manter", pronunciation: "meint√™in", example: "It's hard to maintain focus." },
    { word: "priority", translation: "prioridade", pronunciation: "prai√¥r√¢ti", example: "Safety is our priority." },
    { word: "reliable", translation: "confi√°vel", pronunciation: "ril√°i√¢bol", example: "He is a reliable coworker." },
    { word: "significant", translation: "significativo", pronunciation: "sign√≠f√©cant", example: "There was a significant change." },
    { word: "strategy", translation: "estrat√©gia", pronunciation: "str√°t√©di", example: "We discussed the new strategy." },
    { word: "sustainable", translation: "sustent√°vel", pronunciation: "sust√™inabol", example: "We need sustainable energy." },
    { word: "trend", translation: "tend√™ncia", pronunciation: "tr√©nd", example: "This is a global trend." }
  ]
};

const savedState = JSON.parse(localStorage.getItem("flashcardState") || "{}");
let positions = savedState.positions ?? {};
let difficult = savedState.difficult ?? {};

let currentLevel = levelSelect.value;
if (savedState.level && wordsByLevel[savedState.level]) {
  currentLevel = savedState.level;
  levelSelect.value = currentLevel;
}

let currentIndex = positions[currentLevel] ?? 0;

function persist() {
  localStorage.setItem(
    "flashcardState",
    JSON.stringify({ level: currentLevel, positions, difficult })
  );
}

function getWords() {
  return wordsByLevel[currentLevel];
}

function getCurrentWord() {
  const list = getWords();
  if (!list.length) return null;
  if (currentIndex >= list.length) currentIndex = 0;
  return list[currentIndex];
}

function updateProgress() {
  const total = getWords().length;
  levelCount.textContent = `${total} palavras no n√≠vel ${currentLevel}`;
  progress.textContent = `Carta ${currentIndex + 1} de ${total}`;
}

function isDifficult(wordText) {
  const set = difficult[currentLevel] ?? [];
  return set.includes(wordText);
}

function renderCard() {
  const word = getCurrentWord();
  if (!word) return;
  wordFront.textContent = word.word;
  translation.textContent = word.translation;
  pronunciation.textContent = word.pronunciation;
  example.textContent = word.example;
  starButton.classList.toggle("active", isDifficult(word.word));
  updateProgress();
}

function resetFlip() {
  card.classList.remove("flip");
}

function nextWord() {
  const total = getWords().length;
  currentIndex = (currentIndex + 1) % total;
  positions[currentLevel] = currentIndex;
  persist();
  resetFlip();
  renderCard();
}

function prevWord() {
  const total = getWords().length;
  currentIndex = (currentIndex - 1 + total) % total;
  positions[currentLevel] = currentIndex;
  persist();
  resetFlip();
  renderCard();
}

function speak() {
  const word = getCurrentWord();
  if (!word || !("speechSynthesis" in window)) return;
  speechSynthesis.cancel();
  const utterance = new SpeechSynthesisUtterance(word.word);
  utterance.lang = "en-US";
  speechSynthesis.speak(utterance);
}

function toggleDifficult() {
  const word = getCurrentWord();
  if (!word) return;
  const list = difficult[currentLevel] ?? [];
  const index = list.indexOf(word.word);
  if (index >= 0) {
    list.splice(index, 1);
  } else {
    list.push(word.word);
  }
  difficult[currentLevel] = list;
  persist();
  renderCard();
}

function changeLevel() {
  currentLevel = levelSelect.value;
  const total = getWords().length;
  currentIndex = positions[currentLevel] ?? 0;
  if (currentIndex >= total) currentIndex = 0;
  positions[currentLevel] = currentIndex;
  persist();
  resetFlip();
  renderCard();
}

function flipCard() {
  card.classList.toggle("flip");
}

document.addEventListener("keydown", (event) => {
  if (event.key === "ArrowRight") {
    nextWord();
  } else if (event.key === "ArrowLeft") {
    prevWord();
  } else if (event.key === " ") {
    event.preventDefault();
    flipCard();
  }
});

renderCard();

window.nextWord = nextWord;
window.prevWord = prevWord;
window.flipCard = flipCard;
window.changeLevel = changeLevel;
window.toggleDifficult = toggleDifficult;
window.speak = speak;
</script>
  </body>
</html>
